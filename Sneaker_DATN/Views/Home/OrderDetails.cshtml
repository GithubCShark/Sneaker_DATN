@model IEnumerable<Sneaker_DATN.Models.OrderDetails>
@{
    ViewData["Title"] = "Details";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@using Sneaker_DATN.Constant
@using Microsoft.AspNetCore.Http
@{ string userName = Context.Session.GetString(SessionKey.Guest.Guest_UserName);}
@{
    int i = 0;
    int id = 0;
    if (userName != null && userName != "")
    {
        id = (int)Context.Session.GetInt32(SessionKey.Guest.Guest_ID.ToString());
    }
}



<body>
    <!-- Start Banner Area -->
    <section class="banner-area organic-breadcrumb">
        <div class="container">
            <div class="breadcrumb-banner d-flex flex-wrap align-items-center justify-content-end">
            </div>
        </div>
    </section>
    <!-- End Banner Area -->
    <!-- Start breadcumb Area -->
    <section class="breadcrumb-login">
        <div class="container">
            <nav aria-label="breadcrumb ">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a asp-controller="Home" asp-action="Index">Trang chủ</a></li>
                    <li class="breadcrumb-item"><a asp-controller="Home" asp-action="History" asp-route-id="@id">Lịch sử</a></li>
                    <li class="breadcrumb-item active" aria-current="page">Chi Tiết đơn hàng</li>
                </ol>
            </nav>
        </div>
    </section>

    <div class="colorlib-product colorlib-product-details ">
        <div class="container">
            <div class="row">
                <div class="col-sm-12">
                    <div class="process-wrap process-wrap-details ">
                        <div class="steps-timeline">
                            @if (@ViewBag.order.Status == "Đang xử lý")
                            {
                                <div class="steps-one text-center active">
                                    <p><span class='bx bx-cog bx-spin bx-lg'></span></p>
                                    <h3 class="steps-name">
                                        Đang xử lý
                                    </h3>
                                </div>

                                <div class="steps-two text-center">
                                    <p><span class='bx bxs-package bx-tada bx-lg'></span></p>
                                    <h3 class="steps-name">
                                        Đang đóng gói
                                    </h3>
                                </div>

                                <div class="steps-three text-center">
                                    <p><span class='bx bxs-truck bx-tada bx-lg'></span></p>
                                    <h3 class="steps-name">
                                        Đang giao
                                    </h3>
                                </div>

                                <div class="steps-four text-center">
                                    <p><span class='bx bx-badge-check bx-tada bx-lg'></span></p>
                                    <h3 class="steps-name">
                                        Đã nhận
                                    </h3>
                                </div>

                                <div class="steps-five text-center">
                                    <p><span class='bx bxs-x-circle bx-spin bx-lg'></span></p>
                                    <h3 class="steps-name">
                                        Đã hủy
                                    </h3>
                                </div>
                            }
                            else if (@ViewBag.order.Status == "Đang đóng gói")
                            {
                                <div class="steps-one text-center active">
                                    <p><span class='bx bx-cog bx-spin bx-lg'></span></p>
                                    <h3 class="steps-name">
                                        Đang xử lý
                                    </h3>
                                </div>

                                <div class="steps-two text-center active">
                                    <p><span class='bx bxs-package bx-tada bx-lg'></span></p>
                                    <h3 class="steps-name">
                                        Đang đóng gói
                                    </h3>
                                </div>

                                <div class="steps-three text-center">
                                    <p><span class='bx bxs-truck bx-tada bx-lg'></span></p>
                                    <h3 class="steps-name">
                                        Đang giao
                                    </h3>
                                </div>

                                <div class="steps-four text-center">
                                    <p><span class='bx bx-badge-check bx-tada bx-lg'></span></p>
                                    <h3 class="steps-name">
                                        Đã nhận
                                    </h3>
                                </div>

                                <div class="steps-five text-center">
                                    <p><span class='bx bxs-x-circle bx-spin bx-lg'></span></p>
                                    <h3 class="steps-name">
                                        Đã hủy
                                    </h3>
                                </div>
                            }
                            else if (@ViewBag.order.Status == "Đang giao")
                            {
                                <div class="steps-one text-center active">
                                    <p><span class='bx bx-cog bx-spin bx-lg'></span></p>
                                    <h3 class="steps-name">
                                        Đang xử lý
                                    </h3>
                                </div>

                                <div class="steps-two text-center active">
                                    <p><span class='bx bxs-package bx-tada bx-lg'></span></p>
                                    <h3 class="steps-name">
                                        Đang đóng gói
                                    </h3>
                                </div>

                                <div class="steps-three text-center active">
                                    <p><span class='bx bxs-truck bx-tada bx-lg'></span></p>
                                    <h3 class="steps-name">
                                        Đang giao
                                    </h3>
                                </div>

                                <div class="steps-four text-center">
                                    <p><span class='bx bx-badge-check bx-tada bx-lg'></span></p>
                                    <h3 class="steps-name">
                                        Đã nhận
                                    </h3>
                                </div>

                                <div class="steps-five text-center">
                                    <p><span class='bx bxs-x-circle bx-spin bx-lg'></span></p>
                                    <h3 class="steps-name">
                                        Đã hủy
                                    </h3>
                                </div>
                            }
                            else if (@ViewBag.order.Status == "Đã nhận")
                            {
                                <div class="steps-one text-center active">
                                    <p><span class='bx bx-cog bx-spin bx-lg'></span></p>
                                    <h3 class="steps-name">
                                        Đang xử lý
                                    </h3>
                                </div>

                                <div class="steps-two text-center active">
                                    <p><span class='bx bxs-package bx-tada bx-lg'></span></p>
                                    <h3 class="steps-name">
                                        Đang đóng gói
                                    </h3>
                                </div>

                                <div class="steps-three text-center active">
                                    <p><span class='bx bxs-truck bx-tada bx-lg'></span></p>
                                    <h3 class="steps-name">
                                        Đang giao
                                    </h3>
                                </div>

                                <div class="steps-four text-center active-success">
                                    <p><span class='bx bx-badge-check bx-tada bx-lg'></span></p>
                                    <h3 class="steps-name">
                                        Đã nhận
                                    </h3>
                                </div>

                                <div class="steps-five text-center">
                                    <p><span class='bx bxs-x-circle bx-spin bx-lg'></span></p>
                                    <h3 class="steps-name">
                                        Đã hủy
                                    </h3>
                                </div>
                            }
                            else if (@ViewBag.order.Status == "Đã hủy")
                            {
                                <div class="steps-one text-center">
                                    <p><span class='bx bx-cog bx-spin bx-lg'></span></p>
                                    <h3 class="steps-name">
                                        Đang xử lý
                                    </h3>
                                </div>

                                <div class="steps-two text-center">
                                    <p><span class='bx bxs-package bx-tada bx-lg'></span></p>
                                    <h3 class="steps-name">
                                        Đang đóng gói
                                    </h3>
                                </div>

                                <div class="steps-three text-center">
                                    <p><span class='bx bxs-truck bx-tada bx-lg'></span></p>
                                    <h3 class="steps-name">
                                        Đang giao
                                    </h3>
                                </div>

                                <div class="steps-four text-center">
                                    <p><span class='bx bx-badge-check bx-tada bx-lg'></span></p>
                                    <h3 class="steps-name">
                                        Đã nhận
                                    </h3>
                                </div>

                                <div class="steps-five text-center active-cancel">
                                    <p><span class='bx bxs-x-circle bx-spin bx-lg'></span></p>
                                    <h3 class="steps-name">
                                        Đã hủy
                                    </h3>
                                </div>
                            }
                        </div><!-- /.steps-timeline -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!--================Order Details Area =================-->
    <section class="order_details pt-5">
        <div class="container">
            @*<h3 class="title_confirmation">Thank you. Your order has been received.</h3>*@
            <div class="row order_d_inner">
                <div class="col-lg-12 col-md-12 col-sm-12">
                    <h4 class="mb-3">Chi tiết khách hàng</h4>
                    <div class="details_item">
                        <div class="col-lg-4 col-md-12 col-sm-12">
                            <ul class="list">
                                <li><a><span>Tên khách hàng :</span>@ViewBag.order.FullName</a></li>
                                <li><a><span>Địa chỉ :</span>@ViewBag.order.Address</a></li>
                            </ul>
                        </div>
                        <div class="col-lg-4 col-md-12 col-sm-12">
                            <ul class="list">
                                <li><a><span>Số điện thoại :</span>@ViewBag.order.PhoneNumber</a></li>
                                <li><a><span>Email :</span>@ViewBag.order.Email</a></li>
                            </ul>
                        </div>
                        <div class="col-lg-4 col-md-12 col-sm-12">
                            <ul class="list">
                                <li><a><span>Trạng thái :</span>@ViewBag.order.Status</a></li>
                                <li><a><span>Ngày đặt :</span>@ViewBag.order.DateCreate</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="order_details_table">
                <h2>Chi Tiết Đơn Hàng</h2>
                <div class="table-responsive">
                    <table class="table">
                        <thead>
                            <tr class="order_details-info">
                                <th scope="col"></th>
                                <th scope="col">Tên</th>
                                <th scope="col">Màu</th>
                                <th scope="col">Size</th>
                                <th scope="col">Số lượng</th>
                                <th scope="col">Giá</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var item in Model)
                            {
                                <tr class="orderdetails-custom">
                                    <td class="orderdetails-img">
                                        @foreach (var x in ViewBag.Product)
                                        {
                                            @if (x.ProductID == item.ProductID)
                                            {
                                                <img src="~/images/Product/@x.Image" style="width:100px; height:100px;" />
                                            }
                                        }
                                    </td>
                                    <td>
                                        @foreach (var y in ViewBag.Product)
                                        {
                                            @if (y.ProductID == item.ProductID)
                                            {
                                                <h5> @y.ProductName</h5>
                                            }
                                        }
                                    </td>
                                    <td>
                                        @foreach (var z in ViewBag.Color)
                                        {
                                            @if (z.ColorID == item.ColorID)
                                            {
                                                @z.Color
                                            }
                                        }
                                    </td>
                                    <td>
                                        @foreach (var g in ViewBag.Size)
                                        {
                                            @if (g.SizeID == item.SizeID)
                                            {
                                                <p> @g.Size</p>
                                            }
                                        }
                                    </td>
                                    <td>
                                        @item.Quantity
                                    </td>
                                    <td>
                                        @string.Format("{0:0,0 VNĐ}", item.Price)
                                    </td>
                                </tr>
                                i++;
                            }
                            <tr>
                                <td>
                                    <h4>Tổng</h4>
                                </td>
                                <td>
                                    <h5></h5>
                                </td>
                                <td>
                                    <h5></h5>
                                </td>
                                <td>
                                    <h5></h5>
                                </td>
                                <td>
                                    <h5></h5>
                                </td>
                                <td>
                                    <p>@string.Format("{0:0,0 VNĐ}", ViewBag.order.Total)</p>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <h4>Giảm giá</h4>
                                </td>
                                <td>
                                    <h5></h5>
                                </td>
                                <td>
                                    <h5></h5>
                                </td>
                                <td>
                                    <h5></h5>
                                </td>
                                <td>
                                    <h5></h5>
                                </td>
                                <td>
                                    <p>
                                        @if ((ViewBag.order.Total - ViewBag.order.PaymentAmount) == 0)
                                        {
                                            <span class="ml-5">0</span>
                                        }
                                        else
                                        {
                                            @string.Format("{0:0,0 VNĐ}", ViewBag.order.Total - ViewBag.order.PaymentAmount)
                                        }
                                    </p>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <h4>Tổng tiền</h4>
                                </td>
                                <td>
                                    <h5></h5>
                                </td>
                                <td>
                                    <h5></h5>
                                </td>
                                <td>
                                    <h5></h5>
                                </td>
                                <td>
                                    <h5></h5>
                                </td>
                                <td>
                                    <p>@string.Format("{0:0,0 VNĐ}", ViewBag.order.PaymentAmount)</p>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </section>
</body>
